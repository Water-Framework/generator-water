
<% if(publishModule) { -%>
    project.ext.publishRepoName = "<%- publishRepoName %>"
    project.ext.publishRepoUrl =  "<%- publishRepoUrl %>"
<% if(publishRepoHasCredentials) { -%>
	project.ext.publishRepoUsername =  System.getProperty("publishRepoUsername","noUser")
    project.ext.publishRepoPassword =  System.getProperty("publishRepoPassword","noPassword")
<%  } -%>
<% } -%>
    project.ext.<%- projectName %>Version = '<%- projectVersion %>' 
    group '<%- projectGroupId %>'
	version project.<%- projectName %>Version
    repositories{
      mavenLocal()
	  mavenCentral()
      maven {
         url "https://plugins.gradle.org/m2/"
      }
<% if(publishModule){ -%>
	  maven {
        <% if(publishRepoHasCredentials){ %>
		 credentials {
			username project.publishRepoUsername
			password project.publishRepoPassword
		 }
		<% } -%>
	  name = project.publishRepoName
	  url = project.publishRepoUrl
      }
<% } -%>
	}
	
	apply plugin: 'java'
<% if(publishModule){ -%>
	apply plugin: 'maven-publish'
<% } -%>
	apply plugin: 'jacoco'

dependencies {
    //SLF4J
	implementation group: 'org.slf4j', name: 'slf4j-api', version: project.slf4jVersion
	implementation group: "javax.ws.rs", name: "javax.ws.rs-api", version: project.jaxWsRsApiVersion
	//lombok
	implementation group: 'org.projectlombok', name: 'lombok', version: project.lombokVersion
	annotationProcessor 'org.projectlombok:lombok:' + project.lombokVersion
	//Jackson
	implementation group: 'com.fasterxml.jackson.jaxrs', name: 'jackson-jaxrs-json-provider', version: project.jacksonVersion
	//Persistence
	implementation group: 'javax.persistence', name: 'javax.persistence-api', version: project.javaxPersistenceVersion
	implementation group: 'javax.transaction', name: 'javax.transaction-api', version: project.javaxTransactionApiVersion
	//Encryption
	implementation group: 'org.bouncycastle', name: 'bcmail-jdk15on', version: project.bouncyCastleVersion
	// Implementation
	implementation group: 'it.water.distribution', name: 'Water-distribution-spring', version: project.waterVersion
<%if(applicationTypeEntity) {-%>
    implementation group: 'org.springframework.data', name: 'spring-data-jpa', version: project.springBootVersion
<% if(persistenceLib === 'javax') {	-%>
	//javax persistence
	implementation 'javax.persistence:javax.persistence-api:'+project.javaxPersistenceVersion
	//Water javax persistence
	implementation 'it.water.repository.jpa:JpaRepository-javax:'+project.waterVersion
	implementation group: 'javax.transaction', name: 'javax.transaction-api', version: project.javaxTransactionApiVersion
<% } else { -%>
	//jakarta persistence
	implementation 'jakarta.persistence:jakarta.persistence-api:'+project.jakartaPersistenceVersion
	//Water javax persistence
	implementation 'it.water.repository.jpa:JpaRepository-jakarta:'+project.waterVersion
	implementation group: 'jakarta.transaction', name: 'jakarta.transaction-api', version: project.jakartaTransactionApiVersion
<% } -%>	
	//Water Persistence
	implementation group:'it.water.repository', name:'Repository-entity', version:project.waterVersion
	implementation group:'it.water.repository', name:'Repository-persistence', version:project.waterVersion
	implementation group:'it.water.repository', name:'Repository-service', version:project.waterVersion
<%} -%>
	//Validation
<% if(validationLib === 'javax') {	-%>
	implementation 'it.water.core:Core-validation-javax:'+project.waterVersion
    implementation group: 'javax.validation', name: 'validation-api', version: project.javaxValidationVersion
    implementation group: "org.hibernate", name: "hibernate-validator", version: project.hibernateValidatorJavaxVersion
<% } else { -%>
	implementation 'it.water.core:Core-validation:'+project.waterVersion
    implementation group: 'jakarta.validation', name: 'jakarta.validation-api', version: project.jakartaValidationVersion
    implementation group: "org.hibernate", name: "hibernate-validator", version: project.hibernateValidatorVersion
<% } -%>
<%if(hasRestServices) {-%>
	//Rest Water Deps
	implementation group: 'it.water.service.rest', name: 'Rest-api', version: project.waterVersion
	implementation group: 'it.water.service.rest', name: 'Rest-security', version: project.waterVersion
	implementation group: 'it.water.service.rest', name: 'Rest-service', version: project.waterVersion
	implementation group: 'it.water.service.rest', name: 'Rest-spring-api', version: project.waterVersion
<% 		if(applicationTypeEntity){ -%>
	implementation group: 'it.water.service.rest', name: 'Rest-persistence', version: project.waterVersion
<% 		} -%>
	// https://mvnrepository.com/artifact/io.swagger/swagger-jaxrs
    implementation group: 'io.swagger', name: 'swagger-jaxrs', version: project.swaggerJaxRsVersion
<%} -%>
	//Spring for spring source set
	implementation 'org.springframework.boot:spring-boot-starter-aop:' + project.springBootVersion
	implementation 'org.atteo.classindex:classindex:' + project.atteoClassIndexVersion
	annotationProcessor('org.atteo.classindex:classindex:' + project.atteoClassIndexVersion)

	testImplementation 'org.springframework.boot:spring-boot-starter-test:' + project.springBootVersion
	testImplementation 'org.junit.jupiter:junit-jupiter-api:' + project.junitJupiterVersion
	testImplementation 'org.junit.jupiter:junit-jupiter-engine:' + project.junitJupiterVersion
	testImplementation 'org.atteo.classindex:classindex:' + project.atteoClassIndexVersion
	testAnnotationProcessor('org.atteo.classindex:classindex:' + project.atteoClassIndexVersion)
	testAnnotationProcessor 'org.projectlombok:lombok:' + project.lombokVersion
}

test {
	useJUnitPlatform()
}
	
<% if(publishModule){ -%>
	publishing {
		repositories {
			maven {
				<% if(publishRepoHasCredentials){ -%>
				credentials {
					username project.publishRepoUsername
					password project.publishRepoPassword
				}
				<% } -%>
				name = project.publishRepoName
				url = project.publishRepoUrl
			}
		}
	}
<% } -%>


